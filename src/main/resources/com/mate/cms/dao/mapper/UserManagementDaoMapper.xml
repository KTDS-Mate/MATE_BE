<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.mate.cms.userManagement.dao.UserManagementDao">
  
  <sql id="selectGuideOrNot">
  	<if test='guideCheckedType == "Checked"'>
  		WHERE USR_IS_GD = 'Y'
  	</if>
  </sql>
  
  <sql id="selectSearch">
        <if test='search.searchKeyword != null and search.searchKeyword != ""'>
            AND USR_ID LIKE '%' || #{search.searchKeyword} || '%'
        </if>
    </sql>
    <sql id="search">
        <if test='searchKeyword != null and searchKeyword != ""'>
            AND USR_ID LIKE '%' || #{searchKeyword} || '%'
        </if>
    </sql>
  
  
  <select id="selectUserManagementAllCount"
  		  resultType="_int">
  		SELECT COUNT(1) 
  		FROM USR_INF 
  </select>
  	
  	<select id="selectAllUserManagement"
  			resultType="com.mate.cms.userManagement.vo.UserManagementVO">
  		SELECT USR_ID 
		 	 , USR_LGN_ID 
		 	 , GD_RGST_DT 
		 	 , USR_FNM 
		 	 , USR_LNM 
		 	 , USR_GNDR 
		 	 , USR_BD 
		 	 , USR_EML 
		 	 , USR_IS_GD
		  FROM USR_INF
		  <if test="_parameter != null">
		  	<include refid="com.mate.cms.userManagement.dao.UserManagementDao.selectGuideOrNot" />
		  </if>
  	</select>
  	
  	<!-- 
  	<select id="selectOneUserManagement"
  			parameterType="string"
  			resultType="com.mate.cms.userManagement.vo.UserManagementVO">
  		SELECT USR_ID 
		 	 , USR_LGN_ID 
		 	 , GD_RGST_DT 
		 	 , USR_FNM 
		 	 , USR_LNM 
		 	 , USR_GNDR 
		 	 , USR_BD 
		 	 , USR_EML 
		  FROM USR_INF
  	</select> -->
  	<!-- 바보 -->
  	<select id="selectWaitingGuideUsers"
  	        parameterType="com.mate.cms.customerService.vo.SearchCustomerServiceVO"
  			resultType="com.mate.cms.userManagement.vo.UserManagementVO">
		<if test="search != null">
		<include refid="Common2.pagination_header" />
        </if>
  		SELECT USR_ID
		 	 , USR_LGN_ID
		 	 , GD_RGST_DT
		 	 , USR_FNM
		 	 , USR_LNM
		 	 , USR_GNDR
		 	 , USR_BD
		 	 , USR_EML
		 	 , USR_IS_GD
		 	 , GD_APPL_STT
		 	 , USR_IS_CL
		 	 , USR_IS_BLCK
		 	 , USR_SLF_INTDCTN
		 	 , GD_PRFL_IMG
		 	 , GD_ID_IMG
		 	 , GD_CBC_IMG
		 	 , USR_GD_EXP
		  FROM USR_INF
		 WHERE GD_APPL_STT = 'WAITING'
		 <if test="_parameter != null">
            <include refid="com.mate.cms.userManagement.dao.UserManagementDao.search" />
        </if>
		 <if test="search != null">
            <include refid="Common2.pagination_footer" />
        </if>
  	</select>
  	
  	<select id="selectWaitingGuideUsersCount"
  			resultType="_int">
  		SELECT COUNT(1)
		  FROM USR_INF
		 WHERE GD_APPL_STT = 'WAITING'
  	</select>
  	
  </mapper>